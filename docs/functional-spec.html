<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLE-STAR - Functional Specification</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        section {
            margin-bottom: 40px;
        }
        
        h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        h3 {
            color: #764ba2;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3em;
        }
        
        .feature-box {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }
        
        .feature-box:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        .feature-box h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .requirement {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .requirement strong {
            color: #667eea;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .endpoint {
            background: #f0f7ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .endpoint strong {
            color: #2196F3;
        }
        
        .method-get {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.85em;
        }
        
        .method-post {
            background: #fff3e0;
            color: #e65100;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.85em;
        }
        
        .method-ws {
            background: #f3e5f5;
            color: #6a1b9a;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 0.85em;
        }
        
        footer {
            background: #f5f5f5;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ“‹ MLE-STAR Functional Specification</h1>
            <p>Detailed Feature Specifications & Requirements</p>
        </header>
        
        <div class="content">
            <!-- Phase 1: Initial Solution -->
            <section>
                <h2>Phase 1: Initial Solution Generation</h2>
                <p>The first phase retrieves state-of-the-art models from web search, evaluates them, merges the best candidates, and validates for data leakage.</p>
                
                <h3>1.1 Retriever Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Search the web for state-of-the-art ML models relevant to the task</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Task description (string)</li>
                        <li>Task type (classification, regression, etc.)</li>
                        <li>Data modality (tabular, image, text)</li>
                        <li>Number of models to retrieve (default: 4)</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>List of model candidates with code snippets</li>
                        <li>Source URLs and documentation links</li>
                        <li>Model descriptions and use cases</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR1.1.1:</strong> Search Google Custom Search API for relevant models
                    </div>
                    <div class="requirement">
                        <strong>FR1.1.2:</strong> Extract code snippets from GitHub, Kaggle, and documentation
                    </div>
                    <div class="requirement">
                        <strong>FR1.1.3:</strong> Fall back to curated models if search unavailable
                    </div>
                    <div class="requirement">
                        <strong>FR1.1.4:</strong> Cache search results for identical queries
                    </div>
                </div>
                
                <h3>1.2 Candidate Evaluator Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Evaluate each model candidate on the provided dataset</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Model code</li>
                        <li>Training dataset</li>
                        <li>Validation dataset</li>
                        <li>Evaluation metric</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Performance score</li>
                        <li>Execution time</li>
                        <li>Error logs (if any)</li>
                        <li>Resource usage</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR1.2.1:</strong> Execute model code in sandbox environment
                    </div>
                    <div class="requirement">
                        <strong>FR1.2.2:</strong> Measure performance on validation set
                    </div>
                    <div class="requirement">
                        <strong>FR1.2.3:</strong> Handle execution errors gracefully
                    </div>
                    <div class="requirement">
                        <strong>FR1.2.4:</strong> Enforce timeout limits (default: 5 minutes)
                    </div>
                </div>
                
                <h3>1.3 Merger Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Combine best model candidates into an ensemble</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Evaluated models with scores</li>
                        <li>Ensemble strategy (voting, averaging, stacking)</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Merged ensemble code</li>
                        <li>Ensemble performance estimate</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR1.3.1:</strong> Select top-performing models
                    </div>
                    <div class="requirement">
                        <strong>FR1.3.2:</strong> Implement ensemble strategy
                    </div>
                    <div class="requirement">
                        <strong>FR1.3.3:</strong> Validate ensemble code
                    </div>
                </div>
                
                <h3>1.4 Leakage Checker Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Detect and fix data leakage in generated code</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Solution code</li>
                        <li>Dataset information</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Leakage detection report</li>
                        <li>Fixed code (if leakage found)</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR1.4.1:</strong> Detect common leakage patterns
                    </div>
                    <div class="requirement">
                        <strong>FR1.4.2:</strong> Suggest fixes for detected leakage
                    </div>
                    <div class="requirement">
                        <strong>FR1.4.3:</strong> Validate fixed code
                    </div>
                </div>
                
                <h3>1.5 Data Usage Checker Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Ensure all provided data files are used in the solution</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Solution code</li>
                        <li>List of data files</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Data usage report</li>
                        <li>Unused files list</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR1.5.1:</strong> Analyze code for file references
                    </div>
                    <div class="requirement">
                        <strong>FR1.5.2:</strong> Identify unused data files
                    </div>
                    <div class="requirement">
                        <strong>FR1.5.3:</strong> Suggest improvements for data usage
                    </div>
                </div>
            </section>
            
            <!-- Phase 2: Refinement -->
            <section>
                <h2>Phase 2: Iterative Refinement</h2>
                <p>The second phase performs ablation studies to identify impactful components, then focuses refinement efforts on those components through multiple iterations.</p>
                
                <h3>2.1 Ablation Study Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Identify the impact of each code component on model performance</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Solution code</li>
                        <li>Training/validation datasets</li>
                        <li>Evaluation metric</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Component impact scores</li>
                        <li>Ablation study report</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR2.1.1:</strong> Identify code components
                    </div>
                    <div class="requirement">
                        <strong>FR2.1.2:</strong> Remove each component and measure impact
                    </div>
                    <div class="requirement">
                        <strong>FR2.1.3:</strong> Rank components by impact
                    </div>
                </div>
                
                <h3>2.2 Planner Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Propose refinement strategies for high-impact components</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Code component</li>
                        <li>Impact score</li>
                        <li>Current performance</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Refinement plan</li>
                        <li>Proposed improvements</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR2.2.1:</strong> Analyze component functionality
                    </div>
                    <div class="requirement">
                        <strong>FR2.2.2:</strong> Propose specific improvements
                    </div>
                    <div class="requirement">
                        <strong>FR2.2.3:</strong> Estimate improvement potential
                    </div>
                </div>
                
                <h3>2.3 Coder Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Implement proposed refinements</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Refinement plan</li>
                        <li>Current code</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Refined code</li>
                        <li>Implementation notes</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR2.3.1:</strong> Generate refined code
                    </div>
                    <div class="requirement">
                        <strong>FR2.3.2:</strong> Maintain code quality
                    </div>
                    <div class="requirement">
                        <strong>FR2.3.3:</strong> Add documentation
                    </div>
                </div>
                
                <h3>2.4 Debugger Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Fix errors in generated code</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Error traceback</li>
                        <li>Code context</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Fixed code</li>
                        <li>Explanation of fix</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR2.4.1:</strong> Parse error messages
                    </div>
                    <div class="requirement">
                        <strong>FR2.4.2:</strong> Identify root cause
                    </div>
                    <div class="requirement">
                        <strong>FR2.4.3:</strong> Generate fix
                    </div>
                    <div class="requirement">
                        <strong>FR2.4.4:</strong> Retry with max 3 attempts
                    </div>
                </div>
            </section>
            
            <!-- Phase 3: Ensemble -->
            <section>
                <h2>Phase 3: Ensemble Optimization</h2>
                <p>The third phase proposes and implements ensemble strategies, combining multiple solutions for maximum performance.</p>
                
                <h3>3.1 Ensemble Planner Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Propose ensemble strategies combining multiple solutions</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Multiple solution codes</li>
                        <li>Performance scores</li>
                        <li>Model diversity metrics</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Ensemble strategy</li>
                        <li>Expected performance</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR3.1.1:</strong> Analyze model diversity
                    </div>
                    <div class="requirement">
                        <strong>FR3.1.2:</strong> Propose ensemble strategies
                    </div>
                    <div class="requirement">
                        <strong>FR3.1.3:</strong> Estimate ensemble performance
                    </div>
                </div>
                
                <h3>3.2 Ensembler Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Implement ensemble strategies</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Ensemble strategy</li>
                        <li>Model codes</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Ensemble code</li>
                        <li>Validation results</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR3.2.1:</strong> Implement ensemble logic
                    </div>
                    <div class="requirement">
                        <strong>FR3.2.2:</strong> Validate ensemble code
                    </div>
                    <div class="requirement">
                        <strong>FR3.2.3:</strong> Measure ensemble performance
                    </div>
                </div>
                
                <h3>3.3 Submission Agent</h3>
                <div class="feature-box">
                    <h4>Purpose</h4>
                    <p>Generate final submission file</p>
                    
                    <h4>Inputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Ensemble code</li>
                        <li>Test dataset</li>
                    </ul>
                    
                    <h4>Outputs</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Submission CSV file</li>
                        <li>Submission metadata</li>
                    </ul>
                    
                    <h4>Functional Requirements</h4>
                    <div class="requirement">
                        <strong>FR3.3.1:</strong> Generate predictions on test set
                    </div>
                    <div class="requirement">
                        <strong>FR3.3.2:</strong> Format submission file
                    </div>
                    <div class="requirement">
                        <strong>FR3.3.3:</strong> Validate submission format
                    </div>
                </div>
            </section>
            
            <!-- API Endpoints -->
            <section>
                <h2>API Endpoints</h2>
                
                <h3>Pipeline Management</h3>
                
                <div class="endpoint">
                    <strong><span class="method-post">POST</span> /api/pipeline/start</strong>
                    <p><strong>Description:</strong> Start a new pipeline execution</p>
                    <p><strong>Request Body:</strong></p>
                    <div class="code-block">
{
  "task_description": "Binary classification on tabular data",
  "task_type": "classification",
  "data_modality": "tabular",
  "evaluation_metric": "auc_roc",
  "dataset_path": "/path/to/data",
  "model_provider": "ollama",
  "model_id": "qwen3:30b"
}
                    </div>
                    <p><strong>Response:</strong> Run ID and initial status</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-get">GET</span> /api/pipeline/status/{run_id}</strong>
                    <p><strong>Description:</strong> Get pipeline execution status</p>
                    <p><strong>Response:</strong> Current phase, agent states, progress percentage</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-post">POST</span> /api/pipeline/pause/{run_id}</strong>
                    <p><strong>Description:</strong> Pause a running pipeline</p>
                    <p><strong>Response:</strong> Pause confirmation</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-post">POST</span> /api/pipeline/resume/{run_id}</strong>
                    <p><strong>Description:</strong> Resume a paused pipeline</p>
                    <p><strong>Response:</strong> Resume confirmation</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-post">POST</span> /api/pipeline/stop/{run_id}</strong>
                    <p><strong>Description:</strong> Stop a running pipeline</p>
                    <p><strong>Response:</strong> Stop confirmation</p>
                </div>
                
                <h3>Results & Submission</h3>
                
                <div class="endpoint">
                    <strong><span class="method-get">GET</span> /api/submission/download/{run_id}</strong>
                    <p><strong>Description:</strong> Download submission file</p>
                    <p><strong>Response:</strong> CSV file with predictions</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-get">GET</span> /api/runs</strong>
                    <p><strong>Description:</strong> List all pipeline runs</p>
                    <p><strong>Response:</strong> Array of run metadata</p>
                </div>
                
                <h3>File Management</h3>
                
                <div class="endpoint">
                    <strong><span class="method-post">POST</span> /api/datasets/upload</strong>
                    <p><strong>Description:</strong> Upload dataset files</p>
                    <p><strong>Request:</strong> Multipart form data with files</p>
                    <p><strong>Response:</strong> Upload confirmation with file paths</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-get">GET</span> /api/datasets/list</strong>
                    <p><strong>Description:</strong> List uploaded datasets</p>
                    <p><strong>Response:</strong> Array of dataset metadata</p>
                </div>
                
                <div class="endpoint">
                    <strong><span class="method-post">DELETE</span> /api/datasets/{filename}</strong>
                    <p><strong>Description:</strong> Delete a dataset file</p>
                    <p><strong>Response:</strong> Deletion confirmation</p>
                </div>
                
                <h3>WebSocket</h3>
                
                <div class="endpoint">
                    <strong><span class="method-ws">WS</span> /ws/pipeline/{run_id}</strong>
                    <p><strong>Description:</strong> Real-time pipeline updates</p>
                    <p><strong>Message Format:</strong></p>
                    <div class="code-block">
{
  "type": "agent_update",
  "agent_id": "retriever",
  "status": "completed",
  "timestamp": "2026-01-19T10:30:00Z",
  "data": {...}
}
                    </div>
                </div>
            </section>
        </div>
        
        <footer>
            <p>&copy; 2026 MLE-STAR Project. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>
